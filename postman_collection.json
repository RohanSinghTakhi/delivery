{
  "info": {
    "name": "MedEx Delivery API",
    "description": "Complete API collection for MedEx B2B Medical Delivery System",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8001/api"
    },
    {
      "key": "access_token",
      "value": ""
    },
    {
      "key": "user_id",
      "value": ""
    },
    {
      "key": "vendor_id",
      "value": ""
    },
    {
      "key": "driver_id",
      "value": ""
    },
    {
      "key": "order_id",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"access_token\", jsonData.access_token);",
                  "pm.environment.set(\"user_id\", jsonData.user.id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\",\n  \"full_name\": \"John Doe\",\n  \"phone\": \"+1234567890\",\n  \"role\": \"user\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"access_token\", jsonData.access_token);",
                  "pm.environment.set(\"user_id\", jsonData.user.id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            }
          }
        }
      ]
    },
    {
      "name": "Vendors",
      "item": [
        {
          "name": "Register Vendor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"vendor_id\", jsonData.vendor_id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"business_name\": \"MedPharm Inc\",\n  \"email\": \"vendor@example.com\",\n  \"password\": \"password123\",\n  \"phone\": \"+1234567890\",\n  \"address\": \"123 Main St, New York, NY\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/vendors/register",
              "host": ["{{base_url}}"],
              "path": ["vendors", "register"]
            }
          }
        },
        {
          "name": "Get All Vendors",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vendors",
              "host": ["{{base_url}}"],
              "path": ["vendors"]
            }
          }
        },
        {
          "name": "Get Vendor Drivers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vendors/{{vendor_id}}/drivers",
              "host": ["{{base_url}}"],
              "path": ["vendors", "{{vendor_id}}", "drivers"]
            }
          }
        }
      ]
    },
    {
      "name": "Drivers",
      "item": [
        {
          "name": "Register Driver",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"driver_id\", jsonData.driver_id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"full_name\": \"Driver Smith\",\n  \"email\": \"driver@example.com\",\n  \"password\": \"password123\",\n  \"phone\": \"+1234567890\",\n  \"vehicle_type\": \"bike\",\n  \"vehicle_number\": \"ABC-1234\",\n  \"license_number\": \"DL-123456\",\n  \"vendor_id\": \"{{vendor_id}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/drivers/register",
              "host": ["{{base_url}}"],
              "path": ["drivers", "register"]
            }
          }
        },
        {
          "name": "Get All Drivers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/drivers?vendor_id={{vendor_id}}",
              "host": ["{{base_url}}"],
              "path": ["drivers"],
              "query": [
                {
                  "key": "vendor_id",
                  "value": "{{vendor_id}}"
                }
              ]
            }
          }
        },
        {
          "name": "Update Driver Status",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/drivers/{{driver_id}}/status?new_status=available",
              "host": ["{{base_url}}"],
              "path": ["drivers", "{{driver_id}}", "status"],
              "query": [
                {
                  "key": "new_status",
                  "value": "available"
                }
              ]
            }
          }
        },
        {
          "name": "Update Driver Location",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/drivers/{{driver_id}}/location?latitude=40.7128&longitude=-74.0060",
              "host": ["{{base_url}}"],
              "path": ["drivers", "{{driver_id}}", "location"],
              "query": [
                {
                  "key": "latitude",
                  "value": "40.7128"
                },
                {
                  "key": "longitude",
                  "value": "-74.0060"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Create Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"order_id\", jsonData.id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{user_id}}\",\n  \"vendor_id\": \"{{vendor_id}}\",\n  \"pickup_address\": \"123 Main St, New York, NY\",\n  \"pickup_latitude\": 40.7128,\n  \"pickup_longitude\": -74.0060,\n  \"delivery_address\": \"456 Oak Ave, Brooklyn, NY\",\n  \"delivery_latitude\": 40.6782,\n  \"delivery_longitude\": -73.9442,\n  \"customer_name\": \"Jane Smith\",\n  \"customer_phone\": \"+1234567890\",\n  \"items\": [\n    {\"name\": \"Medicine A\", \"quantity\": 2},\n    {\"name\": \"Medicine B\", \"quantity\": 1}\n  ],\n  \"notes\": \"Please ring doorbell\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": ["{{base_url}}"],
              "path": ["orders"]
            }
          }
        },
        {
          "name": "Get All Orders",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/orders?vendor_id={{vendor_id}}",
              "host": ["{{base_url}}"],
              "path": ["orders"],
              "query": [
                {
                  "key": "vendor_id",
                  "value": "{{vendor_id}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/orders/{{order_id}}",
              "host": ["{{base_url}}"],
              "path": ["orders", "{{order_id}}"]
            }
          }
        },
        {
          "name": "Assign Driver to Order",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/orders/{{order_id}}/assign?driver_id={{driver_id}}",
              "host": ["{{base_url}}"],
              "path": ["orders", "{{order_id}}", "assign"],
              "query": [
                {
                  "key": "driver_id",
                  "value": "{{driver_id}}"
                }
              ]
            }
          }
        },
        {
          "name": "Update Order Status",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/orders/{{order_id}}/status?new_status=picked_up",
              "host": ["{{base_url}}"],
              "path": ["orders", "{{order_id}}", "status"],
              "query": [
                {
                  "key": "new_status",
                  "value": "picked_up"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Tracking",
      "item": [
        {
          "name": "Track Order (Public)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tracking/YOUR_TRACKING_TOKEN_HERE",
              "host": ["{{base_url}}"],
              "path": ["tracking", "YOUR_TRACKING_TOKEN_HERE"]
            },
            "description": "Public tracking endpoint (no auth required)"
          }
        }
      ]
    },
    {
      "name": "Reports",
      "item": [
        {
          "name": "Vendor Daily Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/reports/vendors/{{vendor_id}}?date=2025-01-15",
              "host": ["{{base_url}}"],
              "path": ["reports", "vendors", "{{vendor_id}}"],
              "query": [
                {
                  "key": "date",
                  "value": "2025-01-15"
                }
              ]
            }
          }
        },
        {
          "name": "Driver Earnings Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/reports/drivers/{{driver_id}}?start_date=2025-01-01&end_date=2025-01-15",
              "host": ["{{base_url}}"],
              "path": ["reports", "drivers", "{{driver_id}}"],
              "query": [
                {
                  "key": "start_date",
                  "value": "2025-01-01"
                },
                {
                  "key": "end_date",
                  "value": "2025-01-15"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}